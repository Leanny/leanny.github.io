<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <!-- Bootstrap CSS -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
            integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N"
            crossorigin="anonymous"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
        />
        <script
            src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"
            integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
            crossorigin="anonymous"
        ></script>
        <title>Splatoon 3 - Manual Database</title>
        <style>
            body {
                background-color: #e9ecef;
            }
            footer {
                border-top: 1px solid rgba(86, 61, 124, 0.2);
            }
            .bd-placeholder-img {
                font-size: 1.125rem;
                text-anchor: middle;
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }
            @media (min-width: 768px) {
                .bd-placeholder-img-lg {
                    font-size: 3.5rem;
                }
            }
            .themed-grid-col {
                padding-top: 15px;
                padding-bottom: 15px;
                background-color: rgba(86, 61, 124, 0.15);
                border: 1px solid rgba(86, 61, 124, 0.2);
            }
            #parameterContent {
                margin-top: 1em;
                border: 1px solid rgba(54, 38, 78, 0.2);
                background-color: rgba(34, 19, 56, 0.2);
            }
            h2 {
                margin: 1rem;
            }
            .individual-chapter {
                background-color: #b5b8bb;
                border: 1px solid black;
                border-radius: 5px;
                margin: 2em;
                display: flex;
                flex-wrap: wrap;
            }
            .header {
                flex-basis: 100%;
                background-color: #7f878f;
                border-bottom: 1px solid #7f878f;
            }
            .manual-entry {
                border: 1px solid black;
                border-radius: 2em;
                margin: 2em;
                color: white;
                background-color: rgb(26, 26, 26);
                max-width: max-content;
                padding: 2em;
                display: flex;
                flex-flow: row wrap;
            }
            .manual-entry > * {
                padding: 10px;
                flex: 1 100%;
            }

            .img:hover {
                color: #424242;
                -webkit-transition: all 0.3s ease-in;
                -moz-transition: all 0.3s ease-in;
                -ms-transition: all 0.3s ease-in;
                -o-transition: all 0.3s ease-in;
                transition: all 0.3s ease-in;
                opacity: 1;
                transform: scale(2);
                -ms-transform: scale(2); /* IE 9 */
                -webkit-transform: scale(2); /* Safari and Chrome */
            }
            .card-title {
            }
            .card-label {
            }
            .card-img {
            }

            .HeadingAndImageL {
                text-align: center;
            }

            .HeadingAndImageL .card-title {
                font-size: xx-large;
            }

            .HeadingAndImageL .card-img {
                margin-bottom: 1rem;
            }

            .HeadingAndImageM {
                display: flex;
                flex-wrap: wrap;
            }

            .HeadingAndImageM .card-title {
                border-bottom: 1px solid white;
                flex-basis: 100%;
                font-size: larger;
                font-weight: bold;
            }

            .HeadingAndImageM .card-img {
                margin-bottom: 1rem;
            }

            .HeadingAndImageM .card-text {
                font-size: large;
            }

            .MiniGame {
                display: flex;
                flex-wrap: wrap;
            }

            .MiniGame .card-title {
                border-bottom: 1px solid white;
                flex-basis: 100%;
                font-size: larger;
                font-weight: bold;
            }

            .MiniGame .card-img {
                margin: 1rem;
            }

            .MiniGame .card-text {
                font-size: large;
            }

            .normal-text .card-title {
                border-bottom: 1px solid white;
            }

            @media all and (min-width: 600px) {
                .aside {
                    flex: 1 0 0;
                }
            }

            @media all and (min-width: 800px) {
                .card-img {
                    order: 1;
                }
                .card-label {
                    order: 3;
                }
            }
        </style>
    </head>
    <body>
        <nav class="navbar navbar-expand-md navbar-dark bg-dark">
            <a class="navbar-brand" href="#">Manual Database</a>
            <button
                class="navbar-toggler"
                type="button"
                data-toggle="collapse"
                data-target="#navbarCollapse"
                aria-controls="navbarCollapse"
                aria-expanded="false"
                aria-label="Toggle navigation"
            >
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse"></div>
        </nav>
        <main role="main">
            <div class="jumbotron">
                <div class="col-sm-8 mx-auto">
                    <div id="updateNote"></div>
                    <h1>Splatoon 3 - Manual Database</h1>
                    <div class="toolbar">
                        <select class="form-control" id="language"></select>
                        <select class="form-control" id="version"></select>
                    </div>
                    <ul class="nav nav-tabs" id="modes" role="tablist">
                        <li class="nav-item">
                            <a
                                class="nav-link active"
                                id="bankaramatch-tab"
                                data-toggle="tab"
                                href="#bankaramatch"
                                role="tab"
                                aria-controls="bankaramatch"
                                aria-selected="true"
                                >Anarchy Battle</a
                            >
                        </li>
                        <li class="nav-item">
                            <a
                                class="nav-link"
                                id="minigame-tab"
                                data-toggle="tab"
                                href="#minigame"
                                role="tab"
                                aria-controls="minigame"
                                aria-selected="false"
                                >Tableturf Battle</a
                            >
                        </li>
                        <!--
                        <li class="nav-item">
                            <a
                                class="nav-link"
                                id="league-tab"
                                data-toggle="tab"
                                href="#league"
                                role="tab"
                                aria-controls="league"
                                aria-selected="false"
                                >League Match</a
                            >
                        </li>
                        -->
                        <li class="nav-item">
                            <a
                                class="nav-link"
                                id="amiibomyset-tab"
                                data-toggle="tab"
                                href="#amiibomyset"
                                role="tab"
                                aria-controls="amiibomyset"
                                aria-selected="false"
                                >Plaza: Amiibo My Set</a
                            >
                        </li>
                        <li class="nav-item">
                            <a
                                class="nav-link"
                                id="amiibophoto-tab"
                                data-toggle="tab"
                                href="#amiibophoto"
                                role="tab"
                                aria-controls="amiibophoto"
                                aria-selected="false"
                                >Plaza: Amiibo Photo</a
                            >
                        </li>
                        <li class="nav-item">
                            <a
                                class="nav-link"
                                id="miiverse-tab"
                                data-toggle="tab"
                                href="#miiverse"
                                role="tab"
                                aria-controls="miiverse"
                                aria-selected="false"
                                >Plaza: Miiverse</a
                            >
                        </li>
                        <li class="nav-item">
                            <a
                                class="nav-link"
                                id="regularmatch-tab"
                                data-toggle="tab"
                                href="#regularmatch"
                                role="tab"
                                aria-controls="regularmatch"
                                aria-selected="false"
                                >Regular Match</a
                            >
                        </li>
                        <li class="nav-item">
                            <a
                                class="nav-link"
                                id="coop-tab"
                                data-toggle="tab"
                                href="#coop"
                                role="tab"
                                aria-controls="coop"
                                aria-selected="false"
                                >Salmon Run</a
                            >
                        </li>
                        <li class="nav-item">
                            <a
                                class="nav-link"
                                id="bigrun-tab"
                                data-toggle="tab"
                                href="#bigrun"
                                role="tab"
                                aria-controls="bigrun"
                                aria-selected="false"
                                >Big Run</a
                            >
                        </li>
                        <li class="nav-item">
                            <a
                                class="nav-link"
                                id="fest-tab"
                                data-toggle="tab"
                                href="#fest"
                                role="tab"
                                aria-controls="fest"
                                aria-selected="false"
                                >Splatfest</a
                            >
                        </li>
                        <li class="nav-item">
                            <a
                                class="nav-link"
                                id="vendor-tab"
                                data-toggle="tab"
                                href="#vendor"
                                role="tab"
                                aria-controls="vendor"
                                aria-selected="false"
                                >Vendor</a
                            >
                        </li>

                        <li class="nav-item">
                            <a
                                class="nav-link"
                                id="xmatch-tab"
                                data-toggle="tab"
                                href="#xmatch"
                                role="tab"
                                aria-controls="xmatch"
                                aria-selected="false"
                                >X-Match</a
                            >
                        </li>
                        <li class="nav-item">
                            <a
                                class="nav-link"
                                id="contest-tab"
                                data-toggle="tab"
                                href="#contest"
                                role="tab"
                                aria-controls="contest"
                                aria-selected="false"
                                >Contest</a
                            >
                        </li>
                    </ul>
                    <div class="tab-content" id="modeTabControl">
                        <div
                            class="tab-pane fade show active"
                            id="bankaramatch"
                            role="tabpanel"
                            aria-labelledby="bankaramatch-tab"
                        >
                            <div class="tab-content" id="bankaramatchTabControl">
                                <div id="bankara-chapter"></div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="coop" role="tabpanel" aria-labelledby="coop-tab">
                            <div class="tab-content" id="coopTabControl">
                                <div id="coop-chapter"></div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="bigrun" role="tabpanel" aria-labelledby="bigrun-tab">
                            <div class="tab-content" id="bigrunTabControl">
                                <div id="bigrun-chapter"></div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="fest" role="tabpanel" aria-labelledby="fest-tab">
                            <div class="tab-content" id="festTabControl">
                                <div id="fest-chapter"></div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="league" role="tabpanel" aria-labelledby="league-tab">
                            <div class="tab-content" id="leagueTabControl">
                                <div id="league-chapter"></div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="minigame" role="tabpanel" aria-labelledby="minigame-tab">
                            <div class="tab-content" id="minigameTabControl">
                                <div id="minigame-chapter"></div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="amiibomyset" role="tabpanel" aria-labelledby="amiibomyset-tab">
                            <div class="tab-content" id="amiibomysetTabControl">
                                <div id="amiibomyset-chapter"></div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="amiibophoto" role="tabpanel" aria-labelledby="amiibophoto-tab">
                            <div class="tab-content" id="amiibophotoTabControl">
                                <div id="amiibophoto-chapter"></div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="miiverse" role="tabpanel" aria-labelledby="miiverse-tab">
                            <div class="tab-content" id="miiverseTabControl">
                                <div id="miiverse-chapter"></div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="regularmatch" role="tabpanel" aria-labelledby="regularmatch-tab">
                            <div class="tab-content" id="regularmatchTabControl">
                                <div id="regularmatch-chapter"></div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="vendor" role="tabpanel" aria-labelledby="vendor-tab">
                            <div class="tab-content" id="vendorTabControl">
                                <div id="vendor-chapter"></div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="xmatch" role="tabpanel" aria-labelledby="xmatch-tab">
                            <div class="tab-content" id="xmatchTabControl">
                                <div id="xmatch-chapter"></div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="contest" role="tabpanel" aria-labelledby="contest-tab">
                            <div class="tab-content" id="contestTabControl">
                                <div id="contest-chapter"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <script type="module">
                import { generateHeader, generate_migration_info } from "./js/Utility.js"
                generateHeader($("#navbarCollapse"))
                generate_migration_info($("#updateNote"))
            </script>
            <script>
                let prefix = ""
                if (window.location.href.includes("leanny.github.io")) {
                    prefix = "https://leanny.github.io/splat3/"
                } else {
                    prefix = "http://127.0.0.1:5500/"
                }

                var version = 100
                var lang_dict = {}
                var valid_entries = []

                const localize = (dir, key) => lang_dict[dir][key]

                const languages = [
                    {
                        ext: "USen",
                        region: "NA",
                        language: "en",
                        name: "English",
                    },
                    {
                        ext: "EUen",
                        region: "EU",
                        language: "en",
                        name: "English (UK)",
                    },
                    {
                        ext: "EUes",
                        region: "EU",
                        language: "es",
                        name: "Español",
                    },
                    {
                        ext: "USes",
                        region: "NA",
                        language: "es-MX",
                        name: "Español (MX)",
                    },
                    {
                        ext: "EUfr",
                        region: "EU",
                        language: "fr",
                        name: "Français",
                    },
                    {
                        ext: "USfr",
                        region: "NA",
                        language: "fr-CA",
                        name: "Français (CA)",
                    },
                    {
                        ext: "EUde",
                        region: "EU",
                        language: "de",
                        name: "Deutsch",
                    },
                    {
                        ext: "EUnl",
                        region: "EU",
                        language: "nl",
                        name: "Nederlands",
                    },
                    {
                        ext: "EUit",
                        region: "EU",
                        language: "it",
                        name: "Italiano",
                    },
                    {
                        ext: "EUru",
                        region: "EU",
                        language: "ru",
                        name: "Pусский",
                    },
                    {
                        ext: "JPja",
                        region: "JP",
                        language: "ja",
                        name: "日本語",
                    },
                    {
                        ext: "CNzh",
                        region: "AP",
                        language: "cn",
                        name: "中文（简体）",
                    },
                    {
                        ext: "KRko",
                        region: "AP",
                        language: "kr",
                        name: "한국어",
                    },
                    {
                        ext: "TWzh",
                        region: "AP",
                        language: "tw",
                        name: "中文（繁體）",
                    },
                ]

                for (const lang of Object.values(languages)) {
                    $("#language").append(new Option(lang["name"], lang["ext"]))
                }

                function detectSplatoonLanguage() {
                    let browserLanguages = window.navigator.languages.map(l => l.toLowerCase())
                    let availableLanguages = languages.map(l => l.language.toLowerCase())
                    let resultLanguages = {}
                    for (const lang of Object.values(languages)) {
                        resultLanguages[lang["language"]] = lang["ext"]
                    }

                    // Try to find a match based on the first part of the available languages (i.e., match "es" for "es-ES")
                    for (let language of browserLanguages) {
                        for (let availableLanguage of availableLanguages) {
                            if (language.startsWith(availableLanguage)) {
                                return resultLanguages[availableLanguage]
                            }
                        }
                    }
                }

                const special_chars = [
                    "\x01",
                    "\x02",
                    "\x03",
                    "\x04",
                    "\x05",
                    "\x06",
                    "\x07",
                    "\x08",
                    "\x0b",
                    "\x0c",
                    "\x0e",
                    "\x0f",
                    "\x10",
                    "\x11",
                    "\x12",
                    "\x13",
                    "\x14",
                    "\x15",
                    "\x16",
                    "\x17",
                    "\x18",
                    "\x19",
                    "\x1a",
                    "\x1b",
                    "\x1c",
                    "\x1d",
                    "\x1f",
                    "\u0600",
                    "\u0601",
                    "܀",
                    "܁",
                    "ఀ",
                    "\u0e00",
                    "က",
                    "ခ",
                    "ᑻ",
                    "⣶",
                    "\u3000",
                    "、",
                    "\ueb85",
                    "？",
                    "Ａ",
                    "Ｂ",
                    "Ｃ",
                    "Ｓ",
                    "\ufffb",
                    "￼",
                    "\uffff",
                ]

                const get_image_url = url => {
                    const default_url = `${url
                        .replace("Work/UI/Icon/Manual/", "")
                        .replace("sourceimages/", "")
                        .replace(".tga", ".png")}`
                    const lang_url = `${url
                        .replace("Work/UI/Icon/Manual/", "")
                        .replace("sourceimages/", "")
                        .replace(".tga", "_" + current_lang + ".png")}`
                    if (valid_entries.includes(lang_url)) {
                        return `${prefix}images/manual/${lang_url}`
                    } else {
                        return `${prefix}images/manual/${default_url}`
                    }
                }

                const get_image_tag = (img, alt, extra = "") => {
                    new_img = img.replace(".png", ".webp")
                    return `<picture>
                        <source type="image/webp" srcset="${new_img}" ${extra}>
                        <source type="image/png" srcset="${img}" ${extra}>
                        <img src="${img}" alt="${alt}" ${extra}>
                    </picture>`
                }

                const replace_label = label => {
                    if (label === undefined) return ""
                    label = label.replaceAll("\n", "<br />")
                    special_chars.forEach(sc => {
                        label = label.replaceAll(sc, "")
                    })
                    return label
                }

                const appendContent = (selector, msgPath, page) => {
                    const label = replace_label(localize(msgPath, page.BodyLabel))
                    const title = localize(msgPath, page.TitleLabel)
                    const layout = page.LayoutType
                    let html = ""
                    if (layout === "HeadingAndImageL") {
                        const img = get_image_url(page.Image)
                        html = `<div class="HeadingAndImageL"><div class="aside card-img">${get_image_tag(
                            img,
                            label
                        )}</div><div class="card-title">${title}</div><div class="aside card-label">${label}</div></div>`
                    } else if (layout === "TextAndImageM") {
                        const img = get_image_url(page.Image)
                        html = `<div class="HeadingAndImageM"><div class="card-title">${title}</div><div class="aside card-img">${get_image_tag(
                            img,
                            label,
                            'width="384"'
                        )}</div><div class="aside card-label">${label}</div></div>`
                    } else if (layout === "HeadingAndImageM") {
                        const img = get_image_url(page.Image)
                        html = `<div class="HeadingAndImageM"><div class="card-title">${title}</div><div class="aside card-img">${get_image_tag(
                            img,
                            label,
                            'width="384"'
                        )}</div><div class="aside card-label">${label}</div></div>`
                    } else if (layout === "TextAndImageS") {
                        const img = get_image_url(page.Image)
                        html = `<div class="HeadingAndImageM"><div class="card-title">${title}</div><div class="aside card-img">${get_image_tag(
                            img,
                            label,
                            'width="256"'
                        )}</div><div class="aside card-label">${label}</div></div>`
                    } else if (layout === "MiniGame") {
                        const img = get_image_url(page.Image)
                        html = `<div class="MiniGame"><div class="card-title">${title}</div><div class="card-img">${get_image_tag(
                            img,
                            label
                        )}</div><div class="card-label">${label}</div></div>`
                    } else if (layout === "FestSpecial00") {
                        html = `<div class="normal-text"><div class="card-title">${localize(
                            "LayoutMsg/Cmn_ManualAll_00",
                            "L_ContentsB_08-T_Title_00"
                        )}</div><div class="card-label">${replace_label(
                            localize("LayoutMsg/Cmn_ManualAll_00", "L_ContentsB_08-T_Contents_00")
                        )}</div></div>`
                    } else if (layout === "CoopSpecial00") {
                        html = `<div class="normal-text"><div class="card-title">${title}</div><div class="card-label">${label}</div></div>`
                    } else if (layout === "AllText") {
                        html = `<div class="normal-text"><div class="card-title">${title}</div><div class="card-label">${label}</div></div>`
                    } else if (layout === undefined) {
                        html = `<div class="normal-text"><div class="card-title">${title}</div><div class="card-label">${label}</div></div>`
                    } else {
                        console.warn(page)
                    }
                    selector.append(`<div class="manual-entry">${html}</div>`)
                }

                let current_lang = detectSplatoonLanguage()
                if (typeof current_lang === "undefined") {
                    current_lang = "EUen"
                }

                window.change_lang = lang => {
                    current_lang = lang
                    load_data()
                }

                function translate_menu() {
                    $("#bankaramatch-tab").text(
                        localize("CommonMsg/Manual/ManualBankaraMatch", "BankaraMatch_Button01")
                    )
                    $("#minigame-tab").text(localize("CommonMsg/MatchMode", "MiniGame"))
                    $("#regularmatch-tab").text(localize("CommonMsg/MatchMode", "Regular"))
                    $("#coop-tab").text(localize("CommonMsg/MatchMode", "Coop"))
                    $("#vendor-tab").text(localize("CommonMsg/Glossary", "Vendor"))
                }

                $.getJSON(prefix + "versions.json", vers => {
                    let last = 0
                    vers.forEach(ver => {
                        if (ver === "099") {
                            $("#version").append(new Option("Testfire", ver))
                        } else {
                            $("#version").append(new Option(ver[0] + "." + ver[1] + "." + ver[2], ver))
                        }
                        last = ver
                    })
                    $("#version").val(last)
                    version = last
                    load_data()
                })

                const get_msg_path = text => text.replace("Work/Message/", "").replace(".mstxt", "")

                const standard_format = (type, data_dict) => {
                    const chapters = data_dict.ChapterSelectBtnNum
                    const msgPath = get_msg_path(data_dict.Mstxt)
                    const element = $(`#${type}-chapter`)
                    element.children().remove()
                    let default_chapter = `#${type}-chapter-0`
                    if ("ChapterSelectList" in data_dict && data_dict.ChapterSelectList.length > 0) {
                        data_dict.ChapterSelectList.forEach((chapter, idx) => {
                            const img = get_image_url(chapter.Image)
                            const title = localize(msgPath, chapter.TitleLabel)
                            element.append(
                                `<div id="${type}-chapter-${idx}" class="individual-chapter"><div class="header"><h2>${get_image_tag(
                                    img,
                                    title,
                                    'width="64"'
                                )} ${title}</h2></div></div>`
                            )
                        })
                    } else {
                        element.append(`<div id="${type}-chapterless" class="individual-chapter"></div>`)
                        default_chapter = `#${type}-chapterless`
                    }
                    data_dict.PageList.forEach(page => {
                        if ("Chapter" in page) {
                            appendContent($(`#${type}-chapter-${page.Chapter}`), msgPath, page)
                        } else {
                            appendContent($(default_chapter), msgPath, page)
                        }
                    })
                }

                const strip_title = title => {
                    const l = title.split(" ", 1)[0].length
                    return title.substring(l)
                }

                function load_data() {
                    $.getJSON(prefix + "data/language/" + current_lang + ".json", d => {
                        for (const [key, value] of Object.entries(d)) {
                            lang_dict[key] = value
                        }
                        translate_menu()
                        $.getJSON(prefix + "data/parameter/" + version + "/manual/valid_manual.json", res => {
                            valid_entries = res
                            $.getJSON(
                                prefix +
                                    "data/parameter/" +
                                    version +
                                    "/manual/UIManual_BankaraMatch.spl__UIManualData.json",
                                data_dict => {
                                    standard_format("bankara", data_dict)
                                }
                            )

                            $.getJSON(
                                prefix + "data/parameter/" + version + "/manual/UIManual_Coop.spl__UIManualData.json",
                                data_dict => {
                                    standard_format("coop", data_dict)
                                    const msgPath = get_msg_path(data_dict.Mstxt)
                                    data_dict.SalmonPageList.forEach(entry => {
                                        const img = get_image_url(entry.SelectImage)
                                        let elem = $(`#coop-chapter-1`)
                                        elem.append(
                                            `<div id="coop-chapter-${
                                                entry.Key
                                            }" class="individual-chapter"><div class="header"><h2>${get_image_tag(
                                                img,
                                                localize(msgPath, entry.Page[0].TitleLabel),
                                                'width="64"'
                                            )} ${strip_title(
                                                localize(msgPath, entry.Page[0].TitleLabel)
                                            )}</h2></div></div>`
                                        )
                                        entry.Page.forEach(page => {
                                            appendContent($(`#coop-chapter-${entry.Key}`), msgPath, page)
                                        })
                                    })
                                }
                            )

                            $.getJSON(
                                prefix +
                                    "data/parameter/" +
                                    version +
                                    "/manual/UIManual_Festival.spl__UIManualData.json",
                                data_dict => {
                                    standard_format("fest", data_dict)
                                }
                            )

                            /*$.getJSON(
                                prefix +
                                    "data/parameter/" +
                                    version +
                                    "/manual/UIManual_LeagueMatch.spl__UIManualData.json",
                                data_dict => {
                                    standard_format("league", data_dict)
                                }
                            )*/
                            $.getJSON(
                                prefix +
                                    "data/parameter/" +
                                    version +
                                    "/manual/UIManual_MiniGame.spl__UIManualData.json",
                                data_dict => {
                                    standard_format("minigame", data_dict)
                                }
                            )
                            $.getJSON(
                                prefix +
                                    "data/parameter/" +
                                    version +
                                    "/manual/UIManual_PlzAmiiboMySet.spl__UIManualData.json",
                                data_dict => {
                                    standard_format("amiibomyset", data_dict)
                                }
                            )
                            $.getJSON(
                                prefix +
                                    "data/parameter/" +
                                    version +
                                    "/manual/UIManual_PlzAmiiboPhoto.spl__UIManualData.json",
                                data_dict => {
                                    standard_format("amiibophoto", data_dict)
                                }
                            )
                            $.getJSON(
                                prefix +
                                    "data/parameter/" +
                                    version +
                                    "/manual/UIManual_PlzMiiverse.spl__UIManualData.json",
                                data_dict => {
                                    standard_format("miiverse", data_dict)
                                }
                            )
                            $.getJSON(
                                prefix +
                                    "data/parameter/" +
                                    version +
                                    "/manual/UIManual_RegularMatch.spl__UIManualData.json",
                                data_dict => {
                                    standard_format("regularmatch", data_dict)
                                }
                            )
                            $.getJSON(
                                prefix + "data/parameter/" + version + "/manual/UIManual_Vendor.spl__UIManualData.json",
                                data_dict => {
                                    standard_format("vendor", data_dict)
                                }
                            )
                            $.getJSON(
                                prefix + "data/parameter/" + version + "/manual/UIManual_XMatch.spl__UIManualData.json",
                                data_dict => {
                                    standard_format("xmatch", data_dict)
                                }
                            )
                            $.getJSON(
                                prefix + "data/parameter/" + version + "/manual/UIManual_BigRun.spl__UIManualData.json",
                                data_dict => {
                                    standard_format("bigrun", data_dict)
                                }
                            )
                            $.getJSON(
                                prefix +
                                    "data/parameter/" +
                                    version +
                                    "/manual/UIManual_CoopTeamContest.spl__UIManualData.json",
                                data_dict => {
                                    standard_format("contest", data_dict)
                                }
                            )
                        })
                    })
                }
                $(function () {
                    $("#language").change(function () {
                        change_lang($(this).val())
                    })
                    $("#language").val(current_lang)
                    $("#version").change(function () {
                        version = $(this).val()
                        load_data()
                    })
                })
            </script>
        </main>
        <footer class="footer" id="footer">
            <script type="module">
                import { generateFooter } from "./js/Utility.js"
                generateFooter($("#footer"))
            </script>
        </footer>
    </body>
</html>
